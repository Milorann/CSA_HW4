### Листеренко Ольга Руслановна ###
### БПИ 217 ###
  
### Вариант 6 ###
### Задача ###
***Задача о каннибалах.*** Племя из **n** дикарей ест вместе из большого горшка,
который вмещает **m** кусков тушеного миссионера. Когда дикарь хочет обедать, он ест из горшка один кусок, если только горшок не пуст, иначе дикарь
будит повара и ждет, пока тот не наполнит горшок. Повар, сварив обед, засыпает. ***Создать многопоточное приложение, моделирующее обед дикарей.
При решении задачи пользоваться семафорами.***  

### Отчет на оценку X ###
Приведено условие задачи.  

**Модель параллельных вычислений**  
В программе использована модель "Производители и потребители". Есть n дикарей-потребителей и один повар-производитель, который должен пополнять m кусков-данных, когда они полностью потреблены дикарями-потребителями. В данном случае потребители равны и независимы. Все они "едят" данные повара-производителя.  

**Входные данные**  
Программа запускается с двумя вариантами аргументов коммандной строки: "n m output_file_name.txt" или "input_file_name.txt output_file_name.txt".  
***Натуральные*** числа n и m (от 1 до максимального int). — количество дикарей (потоков) и вместимость горшка (количество данных, которые должен произвести поток-повар-производитель) соответственно.  

Реализовано консольное приложение, использующее семафоры и мьютекс (двоичный семафор).  

В программу добавлены поясняющие комментарии.  

**Сценарий поведения сущностей**  
Дикари приходят на обед. Горшок доверху наполнен кусками тушеного миссионера. Дикарь заглядывает в горшок. Если горшок пуст, то дикарь бежит будить повара, чтобы тот полностью наполнил горшок. Пока повар готовит, дикари не могут есть. После того, как повар натушил еще один горшок, повар идет спать. Дикари могут есть, пока другие сыты. Готовка может начаться до того, как все дикари съели взятый кусок. Например, дикарь берет последний кусок, как тут же прибегает другой дикарь и заглядывает в горшок. Он пуст. Пока готовится еда, первый дикарь жует свой кусок и окончательно его проглотить успевает уже после того, как повар потушил новую порцию. И, конечно, дикари могут перебивать друг друга, вклиниваясь во фразы своих сотоварищей.  

**Обобщенный алгоритм**  
В программе создаются потоки-потребители и семафор с начальным значением m (голодные дикари идут есть из полного горшка). Они начинают забирать ресурсы из семафора. Уже параллельно создается поток-производителя (повар, который спит, пока все не съедят). Поток-потребитель проверяет значения семафора (дикарь проверяет горшок на пустоту) и если пуст, то увеличивает семафор для потока-потребителя (будит повара). Производитель увеличивает значение семафора для потребителей на m (повар доверху наполняет горшок). Теперь ожидающие потребители снова могут расходовать ресурс (дикари, которые ждали приготовления еды, начинают есть). И в производителе, и в потребителях выполняются бесконечные циклы (полагаем, что обед не может закончиться и этот порочный круг на самом деле непрерывен).  

Реализован ввод данных из командной строки. Выполняется проверка на количество аргументов и их корректность. Консольный ввод убран.  

**Ввод и вывод в файл**  
Добавлены ввод и вывод в файл.  
В папку Tests добавлены входные файлы (inputN.txt) и выходные файлы (outputN.txt).  
Вывод осуществляется и в консоль и в файл за исключением случаев, когда открыть файлы не удалось.  
Ввод данных из командной строки изменен.  
